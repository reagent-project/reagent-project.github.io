<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><base href="../"/><link href="css/built.css?1450687235505" rel="stylesheet"/><title>Reagent: News in 0.6.0-alpha</title></head><body><div id="main-content"><div><div data-reactid=".164tq3x21a8" data-react-checksum="-302616152"><div class="nav" data-reactid=".164tq3x21a8.0"><ul class="nav" data-reactid=".164tq3x21a8.0.0"><li class="brand" data-reactid=".164tq3x21a8.0.0.0"><a href="index.html" data-reactid=".164tq3x21a8.0.0.0.0">Reagent:</a></li><li data-reactid=".164tq3x21a8.0.0.1"><a href="index.html" data-reactid=".164tq3x21a8.0.0.1.0">Intro</a></li><li data-reactid=".164tq3x21a8.0.0.2"><a href="news/index.html" data-reactid=".164tq3x21a8.0.0.2.0">News</a></li><li data-reactid=".164tq3x21a8.0.0.3"><a href="https://github.com/reagent-project/reagent" data-reactid=".164tq3x21a8.0.0.3.0">GitHub</a></li></ul></div><div data-reactid=".164tq3x21a8.1"></div><div class="reagent-demo" data-reactid=".164tq3x21a8.2"><h1 data-reactid=".164tq3x21a8.2.0"><a href="news/news060-alpha.html" data-reactid=".164tq3x21a8.2.0.0">News in 0.6.0-alpha</a></h1><div class="demo-text" data-reactid=".164tq3x21a8.2.1"><p data-reactid=".164tq3x21a8.2.1.0"><span data-reactid=".164tq3x21a8.2.1.0.0">Reagent 0.6.0-alpha contains new reactivity helpers, better
    integration with native React components, a new version of
    React (0.14.3), new React dependencies (</span><code data-reactid=".164tq3x21a8.2.1.0.1">react-dom</code><span data-reactid=".164tq3x21a8.2.1.0.2">
    and </span><code data-reactid=".164tq3x21a8.2.1.0.3">react-dom-server</code><span data-reactid=".164tq3x21a8.2.1.0.4">), better performance, and much
    more. </span></p><p data-reactid=".164tq3x21a8.2.1.1">This is a quite big release, so it probably contains a fair
    amount of bugs as well…</p><div class="demo-text" data-reactid=".164tq3x21a8.2.1.2"><section class="demo-text" data-reactid=".164tq3x21a8.2.1.2.0"><h2 data-reactid=".164tq3x21a8.2.1.2.0.0">Breaking changes</h2><ul data-reactid=".164tq3x21a8.2.1.2.0.1"><li data-reactid=".164tq3x21a8.2.1.2.0.1.0"><span data-reactid=".164tq3x21a8.2.1.2.0.1.0.0">Reagent now depends on </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.0.1">cljsjs/react-dom</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.0.2">
         and </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.0.3">cljsjs/react-dom-server</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.0.4"> (see below).</span></li><li data-reactid=".164tq3x21a8.2.1.2.0.1.1"><span data-reactid=".164tq3x21a8.2.1.2.0.1.1.0">The javascript interop macros </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.1.1">.&#x27;</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.1.2">
         and </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.1.3">.!</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.1.4">, in the </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.1.5">reagent.interop</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.1.6">
         namespace are now called </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.1.7">$</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.1.8"> and </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.1.9">$!</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.1.a">
         respectively (the old names clashed with bootstrapped
         ClojureScript).</span></li><li data-reactid=".164tq3x21a8.2.1.2.0.1.2"><span data-reactid=".164tq3x21a8.2.1.2.0.1.2.0">Reactions, i.e </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.2.1">cursor</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.2.2"> called with a
         function, </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.2.3">reagent.ratom/reaction</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.2.4">, </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.2.5">reagent.ratom/run!</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.2.6">
         and </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.2.7">reagent.ratom/make-reaction</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.2.8"> are now lazy and
         executed asynchronously. Previously, reactions used to
         execute immediately whenever the atoms they depended on
         changed. This could cause performance issues in code with
         expensive reactions and frequent updates to state. However,
         this change may break existing code that depends on the
         timing of side-effects from running
         reactions. </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.2.9">flush</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.2.a"> can be used to force outstanding
         reactions to run at a given time.</span></li><li data-reactid=".164tq3x21a8.2.1.2.0.1.3"><span data-reactid=".164tq3x21a8.2.1.2.0.1.3.0">Reactions now only trigger updates of dependent
         components and other reactions if they produce a new result,
         compared with </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.3.1">=</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.3.2">.
         Previously, </span><code data-reactid=".164tq3x21a8.2.1.2.0.1.3.3">identical?</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.3.4"> was used.</span></li><li data-reactid=".164tq3x21a8.2.1.2.0.1.4"><code data-reactid=".164tq3x21a8.2.1.2.0.1.4.0">next-tick</code><span data-reactid=".164tq3x21a8.2.1.2.0.1.4.1"> is now guaranteed to execute its
         argument before the next render (more on that below.)</span></li></ul></section><h2 data-reactid=".164tq3x21a8.2.1.2.1">track: Use any function as a reactive value</h2><p data-reactid=".164tq3x21a8.2.1.2.2"><code data-reactid=".164tq3x21a8.2.1.2.2.0">reagent.core/track</code><span data-reactid=".164tq3x21a8.2.1.2.2.1"> takes a function, and
       optional arguments for that function, and gives a
       derefable (i.e ”atom-like”) value, containing whatever is
       returned by that function. If the tracked function depends on a
       Reagent atom, it is called again whenever that atom changes –
       just like a Reagent component function. If the value returned
       by </span><code data-reactid=".164tq3x21a8.2.1.2.2.2">track</code><span data-reactid=".164tq3x21a8.2.1.2.2.3"> is used in a component, the component is
       re-rendered when the value returned by the function changes. </span></p><p data-reactid=".164tq3x21a8.2.1.2.3"><span data-reactid=".164tq3x21a8.2.1.2.3.0">In other words, </span><code data-reactid=".164tq3x21a8.2.1.2.3.1">@(r/track foo x)</code><span data-reactid=".164tq3x21a8.2.1.2.3.2"> gives the
       same result as </span><code data-reactid=".164tq3x21a8.2.1.2.3.3">(foo x)</code><span data-reactid=".164tq3x21a8.2.1.2.3.4"> – but in the first case,
       foo is only called again when the atom(s) it depends on
       changes.</span></p><p data-reactid=".164tq3x21a8.2.1.2.4">Here&#x27;s an example: </p><div data-reactid=".164tq3x21a8.2.1.2.5"><div class="demo-example clearfix" data-reactid=".164tq3x21a8.2.1.2.5.0"><a class="demo-example-hide" data-reactid=".164tq3x21a8.2.1.2.5.0.0">hide</a><h3 class="demo-heading" data-reactid=".164tq3x21a8.2.1.2.5.0.1">Example </h3><div class="simple-demo" data-reactid=".164tq3x21a8.2.1.2.5.0.2"><ul data-reactid=".164tq3x21a8.2.1.2.5.0.2.0"><li data-reactid=".164tq3x21a8.2.1.2.5.0.2.0.$1">John Smith</li><li data-reactid=".164tq3x21a8.2.1.2.5.0.2.0.$2">Maggie Johnson</li></ul></div></div><div class="demo-source clearfix" data-reactid=".164tq3x21a8.2.1.2.5.1"><h3 class="demo-heading" data-reactid=".164tq3x21a8.2.1.2.5.1.0">Source</h3><pre data-reactid=".164tq3x21a8.2.1.2.5.1.1"><pre data-reactid=".164tq3x21a8.2.1.2.5.1.1.0"><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.0">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.1">ns</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.2"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.3">example.core</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.4">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.5">(</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.6">:require</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.7"> </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.8">[</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.9">reagent.core </span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.a">:as</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.b"> r</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.c">]</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.d">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.0.e">)</span></pre><pre data-reactid=".164tq3x21a8.2.1.2.5.1.1.1"><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.0">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1">defonce</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3">app-state</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.4"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.5">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.6">r/atom</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.7"> </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.8">{</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.9">:people</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.a">
                            </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.b">{</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.c">1 </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.d">{</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.e">:name</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.f"> </span><span style="color:green;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.g">&quot;John Smith&quot;</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.h">}</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.i">
                             2 </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.j">{</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.k">:name</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.l"> </span><span style="color:green;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.m">&quot;Maggie Johnson&quot;</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.n">}</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.o">}</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.p">}</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.q">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.r">)</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.s">

</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.t">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.u">defn</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.v"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.w">people</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.x"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.y">[</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.z">]</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.10">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.11">(</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.12">:people</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.13"> @app-state</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.14">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.15">)</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.16">

</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.17">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.18">defn</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.19"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1a">person-keys</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1b"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1c">[</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1d">]</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1e">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1f">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1g">-&gt;</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1h"> @</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1i">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1j">r/track</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1k"> people</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1l">)</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1m">
      keys
      sort</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1n">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1o">)</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1p">

</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1q">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1r">defn</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1s"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1t">person</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1u"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1v">[</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1w">id</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1x">]</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1y">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.1z">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.20">-&gt;</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.21"> @</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.22">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.23">r/track</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.24"> people</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.25">)</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.26">
      </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.27">(</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.28">get id</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.29">)</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2a">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2b">)</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2c">

</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2d">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2e">defn</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2f"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2g">name-comp</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2h"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2i">[</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2j">id</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2k">]</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2l">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2m">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2n">let</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2o"> </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2p">[</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2q">p @</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2r">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2s">r/track</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2t"> person id</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2u">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2v">]</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2w">
    </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2x">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2y">:li</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.2z">
     </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.30">(</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.31">:name</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.32"> p</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.33">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.34">]</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.35">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.36">)</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.37">

</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.38">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.39">defn</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3a"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3b">name-list</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3c"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3d">[</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3e">]</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3f">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3g">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3h">let</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3i"> </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3j">[</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3k">ids @</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3l">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3m">r/track</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3n"> person-keys</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3o">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3p">]</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3q">
    </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3r">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3s">:ul</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3t">
     </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3u">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3v">for</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3w"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3x">[</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3y">i ids</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.3z">]</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.40">
       ^</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.41">{</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.42">:key</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.43"> i</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.44">}</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.45"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.46">[</span><span data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.47">name-comp i</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.48">]</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.49">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.4a">]</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.4b">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.5.1.1.1.4c">)</span></pre></pre></div></div><p data-reactid=".164tq3x21a8.2.1.2.6"><span data-reactid=".164tq3x21a8.2.1.2.6.0">Here, the </span><code data-reactid=".164tq3x21a8.2.1.2.6.1">name-list</code><span data-reactid=".164tq3x21a8.2.1.2.6.2"> component will only be
       re-rendered if the keys of the </span><code data-reactid=".164tq3x21a8.2.1.2.6.3">:people</code><span data-reactid=".164tq3x21a8.2.1.2.6.4"> map
       changes. Every </span><code data-reactid=".164tq3x21a8.2.1.2.6.5">name-comp</code><span data-reactid=".164tq3x21a8.2.1.2.6.6"> only renders again when
       needed, etc.</span></p><p data-reactid=".164tq3x21a8.2.1.2.7"><span data-reactid=".164tq3x21a8.2.1.2.7.0">Use of </span><code data-reactid=".164tq3x21a8.2.1.2.7.1">track</code><span data-reactid=".164tq3x21a8.2.1.2.7.2"> can improve performance in
       three ways:</span></p><ul data-reactid=".164tq3x21a8.2.1.2.8"><li data-reactid=".164tq3x21a8.2.1.2.8.0">It can be used as a cache for an expensive function,
        that is automatically updated if that function depends on Reagent
        atoms (or other tracks, cursors, etc).</li><li data-reactid=".164tq3x21a8.2.1.2.8.1"><span data-reactid=".164tq3x21a8.2.1.2.8.1.0">It can also be used to limit the number of times a
        component is re-rendered. The user of </span><code data-reactid=".164tq3x21a8.2.1.2.8.1.1">track</code><span data-reactid=".164tq3x21a8.2.1.2.8.1.2"> is
        only updated when the function’s result changes. In other
        words, you can use track as a kind of generalized, read-only
        cursor.</span></li><li data-reactid=".164tq3x21a8.2.1.2.8.2"><span data-reactid=".164tq3x21a8.2.1.2.8.2.0">Every use of </span><code data-reactid=".164tq3x21a8.2.1.2.8.2.1">track</code><span data-reactid=".164tq3x21a8.2.1.2.8.2.2"> with the same arguments
        will only result in one execution of the function. E.g the two
        uses of </span><code data-reactid=".164tq3x21a8.2.1.2.8.2.3">@(r/track people)</code><span data-reactid=".164tq3x21a8.2.1.2.8.2.4"> in the example above
        will only result in one call to the </span><code data-reactid=".164tq3x21a8.2.1.2.8.2.5">people</code><span data-reactid=".164tq3x21a8.2.1.2.8.2.6">
        function (both initially, and when the state atom changes).</span></li></ul><p data-reactid=".164tq3x21a8.2.1.2.9"><span data-reactid=".164tq3x21a8.2.1.2.9.0">If you&#x27;ve been using </span><code data-reactid=".164tq3x21a8.2.1.2.9.1">reagent.ratom/reaction</code><span data-reactid=".164tq3x21a8.2.1.2.9.2">
       etc, </span><code data-reactid=".164tq3x21a8.2.1.2.9.3">track</code><span data-reactid=".164tq3x21a8.2.1.2.9.4"> should be quite familiar. The main
       difference is that </span><code data-reactid=".164tq3x21a8.2.1.2.9.5">track</code><span data-reactid=".164tq3x21a8.2.1.2.9.6"> uses named functions and
       variables, rather than depending on closures, and that you
       don’t have to manage their creation manually (since tracks are
       automatically cached and reused).</span></p><p data-reactid=".164tq3x21a8.2.1.2.a"><b data-reactid=".164tq3x21a8.2.1.2.a.0">Note: </b><span data-reactid=".164tq3x21a8.2.1.2.a.1">The first argument to </span><code data-reactid=".164tq3x21a8.2.1.2.a.2">track</code><span data-reactid=".164tq3x21a8.2.1.2.a.3">
       should be a named function, i.e not an anonymous one. Also,
       beware of lazy data sequences: don’t use deref (i.e ”@”) with
       the </span><code data-reactid=".164tq3x21a8.2.1.2.a.4">for</code><span data-reactid=".164tq3x21a8.2.1.2.a.5"> macro, unless wrapped
       in </span><code data-reactid=".164tq3x21a8.2.1.2.a.6">doall</code><span data-reactid=".164tq3x21a8.2.1.2.a.7"> (just like in Reagent components). </span></p><h2 data-reactid=".164tq3x21a8.2.1.2.b">track!</h2><p data-reactid=".164tq3x21a8.2.1.2.c"><code data-reactid=".164tq3x21a8.2.1.2.c.0">track!</code><span data-reactid=".164tq3x21a8.2.1.2.c.1"> is another new function. It works just
       like </span><code data-reactid=".164tq3x21a8.2.1.2.c.2">track</code><span data-reactid=".164tq3x21a8.2.1.2.c.3">, except that the function passed is
       invoked immediately, and continues to be invoked whenever any
       atoms used within it changes.</span></p><p data-reactid=".164tq3x21a8.2.1.2.d">For example, given this function:</p><div data-reactid=".164tq3x21a8.2.1.2.e"><div class="demo-source clearfix" data-reactid=".164tq3x21a8.2.1.2.e.0"><h3 class="demo-heading" data-reactid=".164tq3x21a8.2.1.2.e.0.0">Source</h3><pre data-reactid=".164tq3x21a8.2.1.2.e.0.1"><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.e.0.1.0">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.e.0.1.1">defn</span><span data-reactid=".164tq3x21a8.2.1.2.e.0.1.2"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.e.0.1.3">log-app-state</span><span data-reactid=".164tq3x21a8.2.1.2.e.0.1.4"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.e.0.1.5">[</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.e.0.1.6">]</span><span data-reactid=".164tq3x21a8.2.1.2.e.0.1.7">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.e.0.1.8">(</span><span data-reactid=".164tq3x21a8.2.1.2.e.0.1.9">prn @app-state</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.e.0.1.a">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.e.0.1.b">)</span></pre></div></div><p data-reactid=".164tq3x21a8.2.1.2.f"><span data-reactid=".164tq3x21a8.2.1.2.f.0">you could use </span><code data-reactid=".164tq3x21a8.2.1.2.f.1">(defonce logger (r/track!
       log-app-state))</code><span data-reactid=".164tq3x21a8.2.1.2.f.2"> to monitor changes
       to </span><code data-reactid=".164tq3x21a8.2.1.2.f.3">app-state</code><span data-reactid=".164tq3x21a8.2.1.2.f.4">. </span><code data-reactid=".164tq3x21a8.2.1.2.f.5">log-app-state</code><span data-reactid=".164tq3x21a8.2.1.2.f.6"> would
       continue to run until you stop it, using </span><code data-reactid=".164tq3x21a8.2.1.2.f.7">(r/dispose!
       logger)</code><span data-reactid=".164tq3x21a8.2.1.2.f.8">.</span></p><h2 data-reactid=".164tq3x21a8.2.1.2.g">with-let: Handling destruction</h2><p data-reactid=".164tq3x21a8.2.1.2.h"><span data-reactid=".164tq3x21a8.2.1.2.h.0">Reagent now has a new way of writing components that need
       to do something when they are no longer around:
       the </span><code data-reactid=".164tq3x21a8.2.1.2.h.1">with-let</code><span data-reactid=".164tq3x21a8.2.1.2.h.2"> macro. It looks just
       like </span><code data-reactid=".164tq3x21a8.2.1.2.h.3">let</code><span data-reactid=".164tq3x21a8.2.1.2.h.4"> – but the bindings only execute once,
       and it takes an optional </span><code data-reactid=".164tq3x21a8.2.1.2.h.5">finally</code><span data-reactid=".164tq3x21a8.2.1.2.h.6"> clause, that
       runs when the component is no longer rendered.</span></p><p data-reactid=".164tq3x21a8.2.1.2.i">For example: here&#x27;s a component that sets up an event
       listener for mouse moves, and stops listening when the
       component is removed.</p><div data-reactid=".164tq3x21a8.2.1.2.j"><div class="demo-example clearfix" data-reactid=".164tq3x21a8.2.1.2.j.0"><a class="demo-example-hide" data-reactid=".164tq3x21a8.2.1.2.j.0.0">hide</a><h3 class="demo-heading" data-reactid=".164tq3x21a8.2.1.2.j.0.1">Example </h3><div class="simple-demo" data-reactid=".164tq3x21a8.2.1.2.j.0.2"><div data-reactid=".164tq3x21a8.2.1.2.j.0.2.0"><span data-reactid=".164tq3x21a8.2.1.2.j.0.2.0.0">Pointer moved to: </span><span data-reactid=".164tq3x21a8.2.1.2.j.0.2.0.1"></span></div></div></div><div class="demo-source clearfix" data-reactid=".164tq3x21a8.2.1.2.j.1"><h3 class="demo-heading" data-reactid=".164tq3x21a8.2.1.2.j.1.0">Source</h3><pre data-reactid=".164tq3x21a8.2.1.2.j.1.1"><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.0">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1">defn</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.2"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.3">mouse-pos-comp</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.4"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.5">[</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.6">]</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.7">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.8">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.9">r/with-let</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.a"> </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.b">[</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.c">pointer </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.d">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.e">r/atom</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.f"> nil</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.g">)</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.h">
               handler #</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.i">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.j">swap!</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.k"> pointer </span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.l">assoc</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.m">
                               </span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.n">:x</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.o"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.p">(</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.q">.-pageX </span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.r">%</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.s">)</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.t">
                               </span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.u">:y</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.v"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.w">(</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.x">.-pageY </span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.y">%</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.z">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.10">)</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.11">
               _ </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.12">(</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.13">.addEventListener </span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.14">js/document</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.15"> </span><span style="color:green;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.16">&quot;mousemove&quot;</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.17"> handler</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.18">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.19">]</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.1a">
    </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1b">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1c">:div</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.1d">
     </span><span style="color:green;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1e">&quot;Pointer moved to: &quot;</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.1f">
     </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1g">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1h">str</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.1i"> @pointer</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1j">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1k">]</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.1l">
    </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1m">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1n">finally</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.1o">
      </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1p">(</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.1q">.removeEventListener </span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1r">js/document</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.1s"> </span><span style="color:green;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1t">&quot;mousemove&quot;</span><span data-reactid=".164tq3x21a8.2.1.2.j.1.1.1u"> handler</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1v">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1w">)</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1x">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.j.1.1.1y">)</span></pre></div></div><p data-reactid=".164tq3x21a8.2.1.2.k">The same thing could of course be achieved with React
       lifecycle methods, but that would be a lot more verbose.</p><p data-reactid=".164tq3x21a8.2.1.2.l"><code data-reactid=".164tq3x21a8.2.1.2.l.0">with-let</code><span data-reactid=".164tq3x21a8.2.1.2.l.1"> can also be combined
       with </span><code data-reactid=".164tq3x21a8.2.1.2.l.2">track</code><span data-reactid=".164tq3x21a8.2.1.2.l.3"> (and other reactive contexts). For
       example, the component above could be written as: </span></p><div data-reactid=".164tq3x21a8.2.1.2.m"><div class="demo-example clearfix" data-reactid=".164tq3x21a8.2.1.2.m.0"><a class="demo-example-hide" data-reactid=".164tq3x21a8.2.1.2.m.0.0">hide</a><h3 class="demo-heading" data-reactid=".164tq3x21a8.2.1.2.m.0.1">Example </h3><div class="simple-demo" data-reactid=".164tq3x21a8.2.1.2.m.0.2"><div data-reactid=".164tq3x21a8.2.1.2.m.0.2.0"><span data-reactid=".164tq3x21a8.2.1.2.m.0.2.0.0">Pointer moved to: </span><span data-reactid=".164tq3x21a8.2.1.2.m.0.2.0.1"></span></div></div></div><div class="demo-source clearfix" data-reactid=".164tq3x21a8.2.1.2.m.1"><h3 class="demo-heading" data-reactid=".164tq3x21a8.2.1.2.m.1.0">Source</h3><pre data-reactid=".164tq3x21a8.2.1.2.m.1.1"><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.0">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1">defn</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.2"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.3">mouse-pos</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.4"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.5">[</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.6">]</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.7">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.8">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.9">r/with-let</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.a"> </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.b">[</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.c">pointer </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.d">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.e">r/atom</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.f"> nil</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.g">)</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.h">
               handler #</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.i">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.j">swap!</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.k"> pointer </span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.l">assoc</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.m">
                               </span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.n">:x</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.o"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.p">(</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.q">.-pageX </span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.r">%</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.s">)</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.t">
                               </span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.u">:y</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.v"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.w">(</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.x">.-pageY </span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.y">%</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.z">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.10">)</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.11">
               _ </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.12">(</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.13">.addEventListener </span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.14">js/document</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.15"> </span><span style="color:green;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.16">&quot;mousemove&quot;</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.17"> handler</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.18">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.19">]</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.1a">
    @pointer
    </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1b">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1c">finally</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.1d">
      </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1e">(</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.1f">.removeEventListener </span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1g">js/document</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.1h"> </span><span style="color:green;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1i">&quot;mousemove&quot;</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.1j"> handler</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1k">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1l">)</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1m">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1n">)</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.1o">

</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1p">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1q">defn</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.1r"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1s">tracked-pos</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.1t"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1u">[</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1v">]</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.1w">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1x">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.1y">:div</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.1z">
   </span><span style="color:green;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.20">&quot;Pointer moved to: &quot;</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.21">
   </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.22">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.23">str</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.24"> @</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.25">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.26">r/track</span><span data-reactid=".164tq3x21a8.2.1.2.m.1.1.27"> mouse-pos</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.28">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.29">)</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.2a">]</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.m.1.1.2b">)</span></pre></div></div><p data-reactid=".164tq3x21a8.2.1.2.n"><span data-reactid=".164tq3x21a8.2.1.2.n.0">The </span><code data-reactid=".164tq3x21a8.2.1.2.n.1">finally</code><span data-reactid=".164tq3x21a8.2.1.2.n.2"> clause will run
       when </span><code data-reactid=".164tq3x21a8.2.1.2.n.3">mouse-pos</code><span data-reactid=".164tq3x21a8.2.1.2.n.4"> is no longer tracked anywhere, i.e
       in this case when </span><code data-reactid=".164tq3x21a8.2.1.2.n.5">tracked-pos</code><span data-reactid=".164tq3x21a8.2.1.2.n.6">is unmounted.</span></p><p data-reactid=".164tq3x21a8.2.1.2.o"><code data-reactid=".164tq3x21a8.2.1.2.o.0">with-let</code><span data-reactid=".164tq3x21a8.2.1.2.o.1"> can also generally be used instead of
       returning functions from components that keep local state, and
       may be a bit easier to read.</span></p><section class="demo-text" data-reactid=".164tq3x21a8.2.1.2.p"><h2 data-reactid=".164tq3x21a8.2.1.2.p.0">Event handling with rswap!</h2><p data-reactid=".164tq3x21a8.2.1.2.p.1"><code data-reactid=".164tq3x21a8.2.1.2.p.1.0">rswap!</code><span data-reactid=".164tq3x21a8.2.1.2.p.1.1"> is another new function in 0.6.0. It
        works like standard </span><code data-reactid=".164tq3x21a8.2.1.2.p.1.2">swap!</code><span data-reactid=".164tq3x21a8.2.1.2.p.1.3"> except that it</span></p><ul data-reactid=".164tq3x21a8.2.1.2.p.2"><li data-reactid=".164tq3x21a8.2.1.2.p.2.0">always returns nil</li><li data-reactid=".164tq3x21a8.2.1.2.p.2.1"><span data-reactid=".164tq3x21a8.2.1.2.p.2.1.0">allows recursive applications of </span><code data-reactid=".164tq3x21a8.2.1.2.p.2.1.1">rswap!</code><span data-reactid=".164tq3x21a8.2.1.2.p.2.1.2"> on the same
         atom.</span></li></ul><p data-reactid=".164tq3x21a8.2.1.2.p.3"><span data-reactid=".164tq3x21a8.2.1.2.p.3.0">That makes </span><code data-reactid=".164tq3x21a8.2.1.2.p.3.1">rswap!</code><span data-reactid=".164tq3x21a8.2.1.2.p.3.2"> especially suited for event
        handling.</span></p><p data-reactid=".164tq3x21a8.2.1.2.p.4"><span data-reactid=".164tq3x21a8.2.1.2.p.4.0">Here’s an example that uses event handling
        with </span><code data-reactid=".164tq3x21a8.2.1.2.p.4.1">rswap!</code><span data-reactid=".164tq3x21a8.2.1.2.p.4.2"> to edit the data introduced in the
        section about </span><code data-reactid=".164tq3x21a8.2.1.2.p.4.3">track</code><span data-reactid=".164tq3x21a8.2.1.2.p.4.4"> above:</span></p><div data-reactid=".164tq3x21a8.2.1.2.p.5"><div class="demo-example clearfix" data-reactid=".164tq3x21a8.2.1.2.p.5.0"><a class="demo-example-hide" data-reactid=".164tq3x21a8.2.1.2.p.5.0.0">hide</a><h3 class="demo-heading" data-reactid=".164tq3x21a8.2.1.2.p.5.0.1">Example </h3><div class="simple-demo" data-reactid=".164tq3x21a8.2.1.2.p.5.0.2"><div data-reactid=".164tq3x21a8.2.1.2.p.5.0.2.0"><div data-reactid=".164tq3x21a8.2.1.2.p.5.0.2.0.0:$1"><input value="John Smith" data-reactid=".164tq3x21a8.2.1.2.p.5.0.2.0.0:$1.0"/></div><div data-reactid=".164tq3x21a8.2.1.2.p.5.0.2.0.0:$2"><input value="Maggie Johnson" data-reactid=".164tq3x21a8.2.1.2.p.5.0.2.0.0:$2.0"/></div><input type="button" value="Add person" data-reactid=".164tq3x21a8.2.1.2.p.5.0.2.0.1"/></div></div></div><div class="demo-source clearfix" data-reactid=".164tq3x21a8.2.1.2.p.5.1"><h3 class="demo-heading" data-reactid=".164tq3x21a8.2.1.2.p.5.1.0">Source</h3><pre data-reactid=".164tq3x21a8.2.1.2.p.5.1.1"><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.0">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1">defn</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3">event-handler</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.5">[</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.6">state </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.7">[</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.8">event-name id value</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.9">]</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.a">]</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.b">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.c">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.d">case</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.e"> event-name
    </span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.f">:set-name</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.g">   </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.h">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.i">assoc-in</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.j"> state </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.k">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.l">:people</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.m"> id </span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.n">:name</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.o">]</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.p">
                          value</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.q">)</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.r">
    </span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.s">:add-person</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.t"> </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.u">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.v">let</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.w"> </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.x">[</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.y">new-key </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.z">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.10">-&gt;&gt;</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.11"> state </span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.12">:people</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.13"> keys </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.14">(</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.15">apply max</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.16">)</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.17"> </span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.18">inc</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.19">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1a">]</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1b">
                  </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1c">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1d">assoc-in</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1e"> state </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1f">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1g">:people</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1h"> new-key</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1i">]</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1j">
                            </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1k">{</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1l">:name</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1m"> </span><span style="color:green;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1n">&quot;&quot;</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1o">}</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1p">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1q">)</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1r">
    state</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1s">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1t">)</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1u">

</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1v">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1w">defn</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1x"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1y">dispatch</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.1z"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.20">[</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.21">e</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.22">]</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.23">
  </span><span style="color:gray;font-style:italic;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.24">;; (js/console.log &quot;Handling event&quot; (str e))</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.25">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.26">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.27">r/rswap!</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.28"> app-state event-handler e</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.29">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2a">)</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2b">

</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2c">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2d">defn</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2e"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2f">name-edit</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2g"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2h">[</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2i">id</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2j">]</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2k">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2l">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2m">let</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2n"> </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2o">[</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2p">p @</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2q">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2r">r/track</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2s"> person id</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2t">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2u">]</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2v">
    </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2w">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2x">:div</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2y">
     </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.2z">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.30">:input</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.31"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.32">{</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.33">:value</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.34"> </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.35">(</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.36">:name</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.37"> p</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.38">)</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.39">
              </span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3a">:on-change</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3b"> #</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3c">(</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3d">dispatch </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3e">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3f">:set-name</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3g"> id </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3h">(</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3i">.-target.value </span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3j">%</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3k">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3l">]</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3m">)</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3n">}</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3o">]</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3p">]</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3q">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3r">)</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3s">

</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3t">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3u">defn</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3v"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3w">edit-fields</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3x"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3y">[</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.3z">]</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.40">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.41">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.42">let</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.43"> </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.44">[</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.45">ids @</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.46">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.47">r/track</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.48"> person-keys</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.49">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4a">]</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4b">
    </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4c">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4d">:div</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4e">
     </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4f">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4g">for</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4h"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4i">[</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4j">i ids</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4k">]</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4l">
       ^</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4m">{</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4n">:key</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4o"> i</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4p">}</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4q"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4r">[</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4s">name-edit i</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4t">]</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4u">)</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4v">
     </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4w">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4x">:input</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4y"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.4z">{</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.50">:type</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.51"> &#x27;button
              </span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.52">:value</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.53"> </span><span style="color:green;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.54">&quot;Add person&quot;</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.55">
              </span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.56">:on-click</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.57"> #</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.58">(</span><span data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.59">dispatch </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.5a">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.5b">:add-person</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.5c">]</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.5d">)</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.5e">}</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.5f">]</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.5g">]</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.5h">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.p.5.1.1.5i">)</span></pre></div></div><p data-reactid=".164tq3x21a8.2.1.2.p.6"><span data-reactid=".164tq3x21a8.2.1.2.p.6.0">All events are passed through the </span><code data-reactid=".164tq3x21a8.2.1.2.p.6.1">dispatch</code><span data-reactid=".164tq3x21a8.2.1.2.p.6.2">
        function, consisting of a trivial application
        of </span><code data-reactid=".164tq3x21a8.2.1.2.p.6.3">rswap!</code><span data-reactid=".164tq3x21a8.2.1.2.p.6.4"> and some optional logging. This is the
        only place where application state actually changes – the rest
        is pure functions.</span></p><p data-reactid=".164tq3x21a8.2.1.2.p.7"><span data-reactid=".164tq3x21a8.2.1.2.p.7.0">The actual event handling is done
        in </span><code data-reactid=".164tq3x21a8.2.1.2.p.7.1">event-handler</code><span data-reactid=".164tq3x21a8.2.1.2.p.7.2">, which takes state and event as
        parameters, and returns a new state (events are represented by
        vectors here, with an event name in the first position).</span></p><p data-reactid=".164tq3x21a8.2.1.2.p.8">All the UI components have to do is then just to return
        some markup, and set up routing of events through the dispatch
        function. </p><p data-reactid=".164tq3x21a8.2.1.2.p.9">This architecture basically divides the application into
        two logical functions: </p><ul data-reactid=".164tq3x21a8.2.1.2.p.a"><li data-reactid=".164tq3x21a8.2.1.2.p.a.0">The first takes state and an event as input, and returns
         the next state.</li><li data-reactid=".164tq3x21a8.2.1.2.p.a.1">The other takes state as input, and returns a UI
         definition.</li></ul><p data-reactid=".164tq3x21a8.2.1.2.p.b"><span data-reactid=".164tq3x21a8.2.1.2.p.b.0">This simple application could probably just as well use
        the common </span><code data-reactid=".164tq3x21a8.2.1.2.p.b.1">swap!</code><span data-reactid=".164tq3x21a8.2.1.2.p.b.2"> instead of </span><code data-reactid=".164tq3x21a8.2.1.2.p.b.3">rswap!</code><span data-reactid=".164tq3x21a8.2.1.2.p.b.4">,
        but using </span><code data-reactid=".164tq3x21a8.2.1.2.p.b.5">swap!</code><span data-reactid=".164tq3x21a8.2.1.2.p.b.6"> in React’s event handlers may
        trigger warnings due to unexpected return values, and may
        cause severe headaches if an event handler called by dispatch
        itself dispatches a new event (that would result in lost
        events, and much confusion).</span></p><p data-reactid=".164tq3x21a8.2.1.2.p.c"><span data-reactid=".164tq3x21a8.2.1.2.p.c.0">For a more structured version of a similar approach, see
        the excellent </span><a href="https://github.com/Day8/re-frame" data-reactid=".164tq3x21a8.2.1.2.p.c.1">re-frame</a><span data-reactid=".164tq3x21a8.2.1.2.p.c.2">
        framework.</span></p></section><section class="demo-text" data-reactid=".164tq3x21a8.2.1.2.q"><h2 data-reactid=".164tq3x21a8.2.1.2.q.0">New React version and new namespaces</h2><p data-reactid=".164tq3x21a8.2.1.2.q.1">Reagent now depends on React version 0.14.3. React itself
        is now split into three parts, with separate packages for
        browser specific code, and HTML generation respectively.</p><p data-reactid=".164tq3x21a8.2.1.2.q.2"><span data-reactid=".164tq3x21a8.2.1.2.q.2.0">To reflect that, two new namespaces have been introduced
        in Reagent as well: </span><code data-reactid=".164tq3x21a8.2.1.2.q.2.1">reagent.dom</code><span data-reactid=".164tq3x21a8.2.1.2.q.2.2">
        and </span><code data-reactid=".164tq3x21a8.2.1.2.q.2.3">reagent.dom.server</code><span data-reactid=".164tq3x21a8.2.1.2.q.2.4">. They contain functions
        that used to be in </span><code data-reactid=".164tq3x21a8.2.1.2.q.2.5">reagent.core</code><span data-reactid=".164tq3x21a8.2.1.2.q.2.6">. </span></p><p data-reactid=".164tq3x21a8.2.1.2.q.3"><code data-reactid=".164tq3x21a8.2.1.2.q.3.0">reagent.dom</code><span data-reactid=".164tq3x21a8.2.1.2.q.3.1"> contains: </span></p><ul data-reactid=".164tq3x21a8.2.1.2.q.4"><li data-reactid=".164tq3x21a8.2.1.2.q.4.0"><code data-reactid=".164tq3x21a8.2.1.2.q.4.0.0">render</code></li><li data-reactid=".164tq3x21a8.2.1.2.q.4.1"><code data-reactid=".164tq3x21a8.2.1.2.q.4.1.0">unmount-component-at-node</code></li><li data-reactid=".164tq3x21a8.2.1.2.q.4.2"><code data-reactid=".164tq3x21a8.2.1.2.q.4.2.0">dom-node</code></li><li data-reactid=".164tq3x21a8.2.1.2.q.4.3"><code data-reactid=".164tq3x21a8.2.1.2.q.4.3.0">force-update-all</code></li></ul><p data-reactid=".164tq3x21a8.2.1.2.q.5"><code data-reactid=".164tq3x21a8.2.1.2.q.5.0">reagent.dom.server</code><span data-reactid=".164tq3x21a8.2.1.2.q.5.1"> contains: </span></p><ul data-reactid=".164tq3x21a8.2.1.2.q.6"><li data-reactid=".164tq3x21a8.2.1.2.q.6.0"><code data-reactid=".164tq3x21a8.2.1.2.q.6.0.0">render-to-string</code></li><li data-reactid=".164tq3x21a8.2.1.2.q.6.1"><code data-reactid=".164tq3x21a8.2.1.2.q.6.1.0">render-to-static-markup</code></li></ul><p data-reactid=".164tq3x21a8.2.1.2.q.7"><span data-reactid=".164tq3x21a8.2.1.2.q.7.0">These functions are still available
        in </span><code data-reactid=".164tq3x21a8.2.1.2.q.7.1">reagent.core</code><span data-reactid=".164tq3x21a8.2.1.2.q.7.2"> in this release (for backward
        compatibility reasons), but they may be deprecated in the
        future.</span></p><p data-reactid=".164tq3x21a8.2.1.2.q.8"><span data-reactid=".164tq3x21a8.2.1.2.q.8.0">The changes in React also mean that if you specify the
        React version to use in your project.clj,
        with </span><code data-reactid=".164tq3x21a8.2.1.2.q.8.1">cljsjs/react</code><span data-reactid=".164tq3x21a8.2.1.2.q.8.2"> in the </span><code data-reactid=".164tq3x21a8.2.1.2.q.8.3">:dependencies</code><span data-reactid=".164tq3x21a8.2.1.2.q.8.4">
        section, you now have to specify </span><code data-reactid=".164tq3x21a8.2.1.2.q.8.5">cljsjs/react-dom</code><span data-reactid=".164tq3x21a8.2.1.2.q.8.6">
        and </span><code data-reactid=".164tq3x21a8.2.1.2.q.8.7">cljsjs/react-dom-server</code><span data-reactid=".164tq3x21a8.2.1.2.q.8.8"> instead.</span></p></section><section class="demo-text" data-reactid=".164tq3x21a8.2.1.2.r"><h2 data-reactid=".164tq3x21a8.2.1.2.r.0">Better interop with native React</h2><p data-reactid=".164tq3x21a8.2.1.2.r.1"><span data-reactid=".164tq3x21a8.2.1.2.r.1.0">The output of </span><code data-reactid=".164tq3x21a8.2.1.2.r.1.1">create-class</code><span data-reactid=".164tq3x21a8.2.1.2.r.1.2"> can now be used
        directly in JSX.</span></p><p data-reactid=".164tq3x21a8.2.1.2.r.2"><span data-reactid=".164tq3x21a8.2.1.2.r.2.0">”Native React components” can now be used directly in
        Reagent’s hiccup forms, using this syntax: </span><code data-reactid=".164tq3x21a8.2.1.2.r.2.1">[:&gt;
        nativeComp {:key &quot;value&quot;}]</code><span data-reactid=".164tq3x21a8.2.1.2.r.2.2">. This might sometimes be more
        convenient than using </span><code data-reactid=".164tq3x21a8.2.1.2.r.2.3">adapt-react-class</code><span data-reactid=".164tq3x21a8.2.1.2.r.2.4">. </span></p><p data-reactid=".164tq3x21a8.2.1.2.r.3"><span data-reactid=".164tq3x21a8.2.1.2.r.3.0">Reagent should now also be a bit easier to use in
        node.js. If global React is not
        defined (i.e </span><code data-reactid=".164tq3x21a8.2.1.2.r.3.1">React</code><span data-reactid=".164tq3x21a8.2.1.2.r.3.2">, </span><code data-reactid=".164tq3x21a8.2.1.2.r.3.3">ReactDOM</code><span data-reactid=".164tq3x21a8.2.1.2.r.3.4">
        and </span><code data-reactid=".164tq3x21a8.2.1.2.r.3.5">ReactDOMServer</code><span data-reactid=".164tq3x21a8.2.1.2.r.3.6">), Reagent tries to
        use </span><code data-reactid=".164tq3x21a8.2.1.2.r.3.7">require</code><span data-reactid=".164tq3x21a8.2.1.2.r.3.8"> instead, to get react, react-dom and
        react-dom/server from npm.</span></p></section><section class="demo-text" data-reactid=".164tq3x21a8.2.1.2.s"><h2 data-reactid=".164tq3x21a8.2.1.2.s.0">Better cursor</h2><p data-reactid=".164tq3x21a8.2.1.2.s.1"><span data-reactid=".164tq3x21a8.2.1.2.s.1.0">Cursors are now cached, which should make them a bit
        easier to use. Previously, every instance
        of </span><code data-reactid=".164tq3x21a8.2.1.2.s.1.1">cursor</code><span data-reactid=".164tq3x21a8.2.1.2.s.1.2"> had its own state.
        Now </span><code data-reactid=".164tq3x21a8.2.1.2.s.1.3">cursor</code><span data-reactid=".164tq3x21a8.2.1.2.s.1.4">s called with the same arguments share
        data, which means that components like this now make sense: </span></p><div data-reactid=".164tq3x21a8.2.1.2.s.2"><div class="demo-example clearfix" data-reactid=".164tq3x21a8.2.1.2.s.2.0"><a class="demo-example-hide" data-reactid=".164tq3x21a8.2.1.2.s.2.0.0">hide</a><h3 class="demo-heading" data-reactid=".164tq3x21a8.2.1.2.s.2.0.1">Example </h3><div class="simple-demo" data-reactid=".164tq3x21a8.2.1.2.s.2.0.2"><p data-reactid=".164tq3x21a8.2.1.2.s.2.0.2.0"><span data-reactid=".164tq3x21a8.2.1.2.s.2.0.2.0.0">A person: </span><span data-reactid=".164tq3x21a8.2.1.2.s.2.0.2.0.1">John Smith</span></p></div></div><div class="demo-source clearfix" data-reactid=".164tq3x21a8.2.1.2.s.2.1"><h3 class="demo-heading" data-reactid=".164tq3x21a8.2.1.2.s.2.1.0">Source</h3><pre data-reactid=".164tq3x21a8.2.1.2.s.2.1.1"><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.0">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.1">defn</span><span data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.2"> </span><span style="color:#5050c0;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.3">cursor-example</span><span data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.4"> </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.5">[</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.6">]</span><span data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.7">
  </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.8">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.9">let</span><span data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.a"> </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.b">[</span><span data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.c">first-person </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.d">(</span><span style="color:#687868;font-weight:bold;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.e">r/cursor</span><span data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.f"> app-state </span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.g">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.h">:people</span><span data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.i"> 1</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.j">]</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.k">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.l">]</span><span data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.m">
    </span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.n">[</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.o">:p</span><span data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.p"> </span><span style="color:green;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.q">&quot;A person: &quot;</span><span data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.r"> </span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.s">(</span><span style="color:blue;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.t">:name</span><span data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.u"> @first-person</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.v">)</span><span style="color:#44a;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.w">]</span><span style="color:#940;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.x">)</span><span style="color:#272;" data-reactid=".164tq3x21a8.2.1.2.s.2.1.1.y">)</span></pre></div></div><p data-reactid=".164tq3x21a8.2.1.2.s.3">Previously cursors were really only useful (in the sense
        that unnecessary re-renderings were avoided) when passed as
        arguments to child components.</p></section><section class="demo-text" data-reactid=".164tq3x21a8.2.1.2.t"><h2 data-reactid=".164tq3x21a8.2.1.2.t.0">Tapping into the rendering loop</h2><p data-reactid=".164tq3x21a8.2.1.2.t.1"><span data-reactid=".164tq3x21a8.2.1.2.t.1.0">The </span><code data-reactid=".164tq3x21a8.2.1.2.t.1.1">next-tick</code><span data-reactid=".164tq3x21a8.2.1.2.t.1.2"> function now has a more
        predictable timing. The function passed
        to </span><code data-reactid=".164tq3x21a8.2.1.2.t.1.3">next-tick</code><span data-reactid=".164tq3x21a8.2.1.2.t.1.4"> is now invoked immediately before the
        next rendering (which is in turn triggered
        using </span><code data-reactid=".164tq3x21a8.2.1.2.t.1.5">requestAnimationFrame</code><span data-reactid=".164tq3x21a8.2.1.2.t.1.6">).</span></p><p data-reactid=".164tq3x21a8.2.1.2.t.2"><code data-reactid=".164tq3x21a8.2.1.2.t.2.0">after-update</code><span data-reactid=".164tq3x21a8.2.1.2.t.2.1"> works just
        like </span><code data-reactid=".164tq3x21a8.2.1.2.t.2.2">next-tick</code><span data-reactid=".164tq3x21a8.2.1.2.t.2.3">, except that the function given is
        invoked immediately </span><b data-reactid=".164tq3x21a8.2.1.2.t.2.4">after</b><span data-reactid=".164tq3x21a8.2.1.2.t.2.5"> the next rendering.</span></p></section></div></div></div><a href="https://github.com/reagent-project/reagent" class="github-badge" data-reactid=".164tq3x21a8.3"><img style="position:absolute;top:0;left:0;border:0;" alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png" data-reactid=".164tq3x21a8.3.0"/></a></div></div></div><script>var pageConfig = {"page-path":"/news/news060-alpha.html"}</script><script src="js/main.js?1450687235505" type="text/javascript"></script></body></html>