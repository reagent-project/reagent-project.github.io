<!doctype html>
<html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><base href="../"/><link href="css/built.css?0917b4" rel="stylesheet"/><title>Reagent: All arguments allowed</title></head><body><div id="main-content"><div><div data-reactroot=""><div class="nav"><ul class="nav"><li class="brand"><a href="index.html">Reagent:</a></li><li><a href="index.html">Intro</a></li><li><a href="news/index.html">News</a></li><li><a href="https://github.com/reagent-project/reagent">GitHub</a></li><li><a href="http://reagent-project.github.io/docs/master/">API</a></li></ul></div><div></div><div class="reagent-demo"><h1><a href="news/any-arguments.html">All arguments allowed</a></h1><span>2014-02-15</span><div class="demo-text"><h2>If it looks like a function…</h2><p>Calling a component in Reagent looks a lot like a function
      call. Now it also <em>works</em> like one.</p><p>Before 0.4.0, component functions were always called with
      three arguments: a map of attributes, a vector of ”children”,
      and the current React component.</p><p>This was confusing, and an unnecessary limitation, so now
      component functions get exactly the same arguments you pass to
      them.</p><div class="demo-text"><p>In other words, you can now do this:</p><div><div class="demo-example clearfix"><a class="demo-example-hide">hide</a><h3 class="demo-heading">Example </h3><div class="simple-demo"><p>Hello, <!-- -->world<!-- -->!</p></div></div><div class="demo-source clearfix"><h3 class="demo-heading">Source</h3><pre><span style="color:#272">(</span><span style="color:#687868;font-weight:bold">defn</span> <span style="color:#5050c0;font-weight:bold">hello-component</span> <span style="color:#940">[</span>name<span style="color:#940">]</span>
  <span style="color:#940">[</span><span style="color:blue">:p</span> <span style="color:green">&quot;Hello, &quot;</span> name <span style="color:green">&quot;!&quot;</span><span style="color:#940">]</span><span style="color:#272">)</span>

<span style="color:#272">(</span><span style="color:#687868;font-weight:bold">defn</span> <span style="color:#5050c0;font-weight:bold">say-hello</span> <span style="color:#940">[</span><span style="color:#940">]</span>
  <span style="color:#940">[</span>hello-component <span style="color:green">&quot;world&quot;</span><span style="color:#940">]</span><span style="color:#272">)</span></pre></div></div><p>In the above example, it wouldn’t make any difference at
          all if <code>hello-component</code> had been called as a
          function, i.e with parentheses instead of brackets (except
          for performance, since components are cached between renders
          if the arguments to them don’t change).</p><p>But there is one drawback: component function no longer
          receives the ”current component” as a parameter. Instead
          you’ll have to use <code>reagent.core/current-component</code> in order to get that. Beware that <code>current-component</code> is only valid in component
          functions, and must be called outside of e.g event handlers
          and <code>for</code> expressions, so it’s safest to always
          put the call at the top, as in <code>my-div</code> here:</p><div><div class="demo-example clearfix"><a class="demo-example-hide">hide</a><h3 class="demo-heading">Example </h3><div class="simple-demo"><div><div class="custom">Some text.</div><div style="font-weight:bold" class="custom"><p>Some other text in bold.</p></div></div></div></div><div class="demo-source clearfix"><h3 class="demo-heading">Source</h3><pre><pre><span style="color:#272">(</span><span style="color:#687868;font-weight:bold">ns</span> <span style="color:#5050c0;font-weight:bold">example</span>
  <span style="color:#940">(</span><span style="color:blue">:require</span> <span style="color:#44a">[</span>reagent.core <span style="color:blue">:as</span> r<span style="color:#44a">]</span><span style="color:#940">)</span><span style="color:#272">)</span></pre><pre><span style="color:#272">(</span><span style="color:#687868;font-weight:bold">defn</span> <span style="color:#5050c0;font-weight:bold">my-div</span> <span style="color:#940">[</span><span style="color:#940">]</span>
  <span style="color:#940">(</span><span style="color:#687868;font-weight:bold">let</span> <span style="color:#44a">[</span>this <span style="color:#272">(</span><span style="color:#687868;font-weight:bold">r/current-component</span><span style="color:#272">)</span><span style="color:#44a">]</span>
    <span style="color:#44a">(</span><span style="color:#687868;font-weight:bold">into</span> <span style="color:#272">[</span><span style="color:blue">:div.custom</span> <span style="color:#940">(</span><span style="color:#687868;font-weight:bold">r/props</span> this<span style="color:#940">)</span><span style="color:#272">]</span>
          <span style="color:#272">(</span><span style="color:#687868;font-weight:bold">r/children</span> this<span style="color:#272">)</span><span style="color:#44a">)</span><span style="color:#940">)</span><span style="color:#272">)</span>

<span style="color:#272">(</span><span style="color:#687868;font-weight:bold">defn</span> <span style="color:#5050c0;font-weight:bold">call-my-div</span> <span style="color:#940">[</span><span style="color:#940">]</span>
  <span style="color:#940">[</span><span style="color:blue">:div</span>
   <span style="color:#44a">[</span>my-div <span style="color:green">&quot;Some text.&quot;</span><span style="color:#44a">]</span>
   <span style="color:#44a">[</span>my-div <span style="color:#272">{</span><span style="color:blue">:style</span> <span style="color:#940">{</span><span style="color:blue">:font-weight</span> &#x27;bold<span style="color:#940">}</span><span style="color:#272">}</span>
    <span style="color:#272">[</span><span style="color:blue">:p</span> <span style="color:green">&quot;Some other text in bold.&quot;</span><span style="color:#272">]</span><span style="color:#44a">]</span><span style="color:#940">]</span><span style="color:#272">)</span></pre></pre></div></div><p><em>Note: </em><code>r/props</code> and <code>r/children</code> correspond to React’s <code>this.props</code> and <code>this.props.children</code>,
         respectively. They may be convenient to use when wrapping
         native React components, since they follow the same
         conventions when interpreting the arguments given.</p><h2>Other news in 0.4.0</h2><ul><li>React has been updated to version 0.9.0.</li><li>You can now use any object that satisfies <code>ifn?</code> as a component function, and not just
           plain functions. That includes functions defined with <code>deftype</code>, <code>defrecord</code>, etc, as well
           as collections like maps.</li><li><code>reagent.core/set-state</code> and <code>reagent.core/replace-state</code> are now implemented
           using an <code>reagent.core/atom</code>, and are
           consequently async.</li><li>Keys associated with items in a seq (e.g ”dynamic
           children” in React parlance) can now be specified with
           meta-data, as well as with a <code>:key</code> item in the
           first parameter as before. In other words, these two forms
           are now equivalent: <code>^{:key foo} [:li bar]</code>
           and <code>[:li {:key foo} bar]</code>.</li><li>Performance has been improved even further. For
           example, there is now practically no overhead for
           tracking derefs in components that don’t use <code>atom</code>s. Allocations and memory use have also
           been reduced.</li><li>Intro and examples have been tweaked a little to take
          advantage of the new calling conventions.</li></ul><h2>New svg example</h2><p>There is also a new, elegant and simple <a href="https://github.com/reagent-project/reagent/tree/master/examples/geometry">example</a> of using svg with Reagent, written
          by <a href="https://github.com/jonase">Jonas Enlund</a>. It also shows how you can
          use Reagent’s new calling convensions, and looks like
          this:</p><div><div class="demo-example clearfix"><a class="demo-example-hide">hide</a><h3 class="demo-heading">Example </h3><div class="simple-demo"><svg width="100%" height="500" style="border:1px solid black"><text style="-webkit-user-select:none;-moz-user-select:none" x="20" y="20" font-size="20">The points are draggable and the slider controls history</text><g><g><line stroke="black" stroke-width="2" x1="100" y1="100" x2="200" y2="200"></line><line stroke="black" stroke-width="2" x1="200" y1="200" x2="100" y2="200"></line><line stroke="black" stroke-width="2" x1="100" y1="200" x2="100" y2="100"></line></g><circle fill="rgba(255,0,0,0.1)" stroke="black" stroke-width="2" cx="250" cy="300" r="50"></circle><line stroke="black" stroke-width="2" x1="250" y1="300" x2="250" y2="250"></line><line stroke="black" stroke-width="2" x1="100" y1="50" x2="500" y2="50"></line><rect stroke="black" width="10" height="30" x="500" y="35"></rect><circle stroke="black" stroke-width="2" fill="blue" r="5" cx="250" cy="250"></circle><circle stroke="black" stroke-width="2" fill="blue" r="5" cx="250" cy="300"></circle><circle stroke="black" stroke-width="2" fill="blue" r="5" cx="100" cy="100"></circle><circle stroke="black" stroke-width="2" fill="blue" r="5" cx="200" cy="200"></circle><circle stroke="black" stroke-width="2" fill="blue" r="5" cx="100" cy="200"></circle></g></svg></div></div><div class="clearfix"></div></div></div></div></div><a href="https://github.com/reagent-project/reagent" class="github-badge"><img style="position:absolute;top:0;left:0;border:0" alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png"/></a></div></div></div><script>var pageConfig = {"page-path":"/news/any-arguments.html"}</script><script src="js/main.js?a7eae9" type="text/javascript"></script></body></html>